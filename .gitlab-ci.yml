#image: python:2.7

cache:
  key: "$CI_BUILD_REF_NAME"
  untracked: true
  paths:
    - build/

stages:
  - build
  - test

build_job:
  stage: build
  script:
    - pyinstaller --version
    - pip install pyinstaller==3.1.1
    - make -C gui ../mfix
  artifacts:
    paths:
    - mfix
  only:
    - branches
  tags:
    - docker
    - anaconda
    - python2

test_job:
  stage: test
  script:
    - make -C gui test
  only:
    - branches
  tags:
    - docker
    - anaconda
    - python2
