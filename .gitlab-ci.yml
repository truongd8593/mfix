# cache:
#   key: "$CI_BUILD_REF_NAME"
#   untracked: true
#   paths:
#     - build/

stages:
  - build
  - install

build_job:
  stage: build
  script:
    - ./configure_mfix --python
    - make
  artifacts:
    expire_in: 1 week
    paths:
    - mfix
    - mfixsolver*
  only:
    - branches
  tags:
    - mfixdev

install_job:
  stage: install
  script:
    - make -C mfixgui test
    - env PYTHONPATH=/nfs/home/8/public/mfixgui/lib/python2.7/site-packages python setup.py install --prefix=/nfs/home/8/public/mfixgui
  only:
    - branches
  tags:
    - mfixdev
